import{r,j as s}from"./index-CV0EdXLl.js";import{G as t}from"./GeneralValue-D-8_bCGY.js";function u({invertData:i}){const[c,m]=r.useState(!1),[a,o]=r.useState(!1),d=r.useRef(!1),[e,h]=r.useState(),l=r.useCallback(async()=>{if(!d.current)try{console.log("Fetching total..."),d.current=!0;const x=await(await fetch("/total")).json();h(x)}catch(n){console.error("Fetch total error",n)}finally{d.current=!1}},[]);return r.useEffect(()=>{l()},[l]),s.jsxs("div",{className:"summary row",children:[s.jsxs("div",{className:"yield summary-item flex-1",children:[s.jsx("div",{className:"summary-item-title",children:"Solar Yield"}),s.jsx("div",{className:"summary-item-content",children:s.jsxs("div",{className:"row justify-space-between",children:[s.jsx("img",{src:"/assets/icon_consumption.png"}),s.jsxs("div",{className:"yield-texts text-right",children:[s.jsx(t,{value:i.e_pv_day,unit:" kWh"}),s.jsx("div",{className:"description",children:"Yield today"}),e&&s.jsxs(s.Fragment,{children:[s.jsx(t,{value:e.pv.toFixed(1),unit:" kWh"}),s.jsx("div",{className:"description",children:"Total Yield"})]})]})]})})]}),s.jsxs("div",{className:"battery summary-item flex-1",onClick:()=>m(!c),children:[s.jsx("div",{className:"summary-item-title",children:c?"Battery Charged":"Battery Discharge"}),s.jsx("div",{className:"summary-item-content",children:s.jsxs("div",{className:"row justify-space-between",children:[s.jsx("img",{src:"/assets/icon_battery_discharging.png"}),s.jsxs("div",{className:"text-right",children:[s.jsx(t,{value:c?i.e_chg_day:i.e_dischg_day,unit:" kWh"}),s.jsx("div",{className:"description",children:c?"Charged today":"Discharged today"}),e&&s.jsxs(s.Fragment,{children:[s.jsx(t,{value:(c?e.battery_charged:e.battery_discharged).toFixed(1),unit:" kWh"}),s.jsxs("div",{className:"description",children:["Total ",c?"Charged":"Discharged"]})]})]})]})})]}),s.jsxs("div",{className:"feed summary-item flex-1",onClick:()=>o(!a),children:[s.jsx("div",{className:"summary-item-title ",children:a?"Feed-in Energy":"Import"}),s.jsx("div",{className:"summary-item-content",children:s.jsxs("div",{className:"row justify-space-between",children:[s.jsx("img",{src:a?"/assets/icon_feed_in_energy.png":"/assets/icon_import.png"}),s.jsx("div",{className:"feed-texts text-right",children:s.jsxs("div",{className:"col",children:[s.jsx(t,{value:a?i.e_to_grid_day:i.e_to_user_day,unit:" kWh"}),s.jsx("div",{className:"description",children:a?"Today Export":"Today Import"}),e&&s.jsxs(s.Fragment,{children:[s.jsx(t,{value:(a?e.grid_export:e.grid_import).toFixed(1),unit:" kWh"}),s.jsxs("div",{className:"description",children:["Total ",a?"Export":"Import"]})]})]})})]})})]}),s.jsxs("div",{className:"comsumption summary-item flex-1",children:[s.jsx("div",{className:"summary-item-title ",children:"Comsumption"}),s.jsx("div",{className:"summary-item-content",children:s.jsxs("div",{className:"row justify-space-between",children:[s.jsx("img",{src:"/assets/icon_consumption.png"}),s.jsxs("div",{className:"feed-texts text-right",children:[s.jsx(t,{value:(i.e_inv_day+i.e_to_user_day+i.e_eps_day-i.e_rec_day).toFixed(1),unit:" kWh"}),s.jsx("div",{className:"description",children:"Today Comsumption"}),e&&s.jsxs(s.Fragment,{children:[s.jsx(t,{value:e.consumption.toFixed(1),unit:" kWh"}),s.jsx("div",{className:"description",children:"Total Comsumption"})]})]})]})})]})]})}const p=r.memo(u);export{p as default};
