import{r as a,j as e}from"./index-BjBri1wY.js";import{G as t}from"./GeneralValue-fNk49Km0.js";function j({invertData:i}){const[r,m]=a.useState(!1),[c,h]=a.useState(!1),n=a.useRef(!1),[s,x]=a.useState(),d=a.useCallback(async()=>{if(!n.current)try{console.log("Fetching total..."),n.current=!0;const u=await(await fetch("/total")).json();x(u)}catch(o){console.error("Fetch total error",o)}finally{n.current=!1}},[]),l=a.useCallback(()=>{document.hidden||d()},[d]);return a.useEffect(()=>(d(),document.addEventListener("visibilitychange",l),()=>{document.removeEventListener("visibilitychange",l)}),[d,l]),e.jsxs("div",{className:"summary row",children:[e.jsxs("div",{className:"yield summary-item flex-1",children:[e.jsx("div",{className:"summary-item-title",children:"Solar Yield"}),e.jsx("div",{className:"summary-item-content",children:e.jsxs("div",{className:"row justify-space-between",children:[e.jsx("img",{src:"/assets/icon_consumption.png"}),e.jsxs("div",{className:"yield-texts text-right",children:[e.jsx(t,{value:i.e_pv_day,unit:" kWh"}),e.jsx("div",{className:"description",children:"Yield today"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(t,{value:s.pv.toFixed(1),unit:" kWh"}),e.jsx("div",{className:"description",children:"Total Yield"})]})]})]})})]}),e.jsxs("div",{className:"battery summary-item flex-1",onClick:()=>m(!r),children:[e.jsx("div",{className:"summary-item-title",children:r?"Battery Charged":"Battery Discharge"}),e.jsx("div",{className:"summary-item-content",children:e.jsxs("div",{className:"row justify-space-between",children:[e.jsx("img",{src:"/assets/icon_battery_discharging.png"}),e.jsxs("div",{className:"text-right",children:[e.jsx(t,{value:r?i.e_chg_day:i.e_dischg_day,unit:" kWh"}),e.jsx("div",{className:"description",children:r?"Charged today":"Discharged today"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(t,{value:(r?s.battery_charged:s.battery_discharged).toFixed(1),unit:" kWh"}),e.jsxs("div",{className:"description",children:["Total ",r?"Charged":"Discharged"]})]})]})]})})]}),e.jsxs("div",{className:"feed summary-item flex-1",onClick:()=>h(!c),children:[e.jsx("div",{className:"summary-item-title ",children:c?"Feed-in Energy":"Import"}),e.jsx("div",{className:"summary-item-content",children:e.jsxs("div",{className:"row justify-space-between",children:[e.jsx("img",{src:c?"/assets/icon_feed_in_energy.png":"/assets/icon_import.png"}),e.jsx("div",{className:"feed-texts text-right",children:e.jsxs("div",{className:"col",children:[e.jsx(t,{value:c?i.e_to_grid_day:i.e_to_user_day,unit:" kWh"}),e.jsx("div",{className:"description",children:c?"Today Export":"Today Import"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(t,{value:(c?s.grid_export:s.grid_import).toFixed(1),unit:" kWh"}),e.jsxs("div",{className:"description",children:["Total ",c?"Export":"Import"]})]})]})})]})})]}),e.jsxs("div",{className:"comsumption summary-item flex-1",children:[e.jsx("div",{className:"summary-item-title ",children:"Comsumption"}),e.jsx("div",{className:"summary-item-content",children:e.jsxs("div",{className:"row justify-space-between",children:[e.jsx("img",{src:"/assets/icon_consumption.png"}),e.jsxs("div",{className:"feed-texts text-right",children:[e.jsx(t,{value:(i.e_inv_day+i.e_to_user_day+i.e_eps_day-i.e_rec_day).toFixed(1),unit:" kWh"}),e.jsx("div",{className:"description",children:"Today Used"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(t,{value:s.consumption.toFixed(1),unit:" kWh"}),e.jsx("div",{className:"description",children:"Total Used"})]})]})]})})]})]})}const p=a.memo(j);export{p as default};
