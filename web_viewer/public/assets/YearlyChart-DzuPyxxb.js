import{r as e,j as p,L as w}from"./index-bn3fLlzU.js";import{C as S}from"./react-apexcharts.min-C1JzOHNX.js";import{r as n}from"./utils-bN4E_OZW.js";const t="Solar production",g=e.forwardRef((C,x)=>{const[i,d]=e.useState([]),[b,m]=e.useState(!1),h=e.useRef(!1),E=e.useMemo(()=>{const a=[],r=[],l=[],u=[],f=[],y=[];return i.forEach(s=>{const o=s[3];a.push({x:o,y:n(s[4])}),r.push({x:o,y:n(s[5])}),l.push({x:o,y:n(s[6])}),u.push({x:o,y:n(s[7])}),f.push({x:o,y:n(s[8])}),y.push({x:o,y:n(s[9])})}),[{name:t,data:a},{name:"Battery discharged",data:l},{name:"Battery charged",data:r},{name:"Export to grid",data:f},{name:"Import to user",data:u},{name:"Comsumption",data:y}]},[i]),c=e.useCallback(async()=>{if(h.current)return;h.current=!0;const r=await(await fetch("/yearly-chart")).json();d(r),h.current=!1},[d]);return e.useImperativeHandle(x,()=>({fetchChart:c})),e.useEffect(()=>{c(),document.addEventListener("visibilitychange",()=>{document.hidden||c()})},[c]),e.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)");a.matches&&m(!0),a.addEventListener("change",r=>m(r.matches))},[]),i.length?p.jsx(S,{type:"bar",series:E,options:{chart:{toolbar:{show:!1},height:300,zoom:{allowMouseWheelZoom:!1}},colors:["rgb(112, 173, 70)","rgb(90, 155, 213)","rgb(64, 38, 198)","rgb(246, 104, 103)","rgb(153, 107, 31)","rgb(255, 164, 97)"],theme:{mode:b?"dark":"light"},dataLabels:{enabled:!1},xaxis:{type:"category"},tooltip:{x:{format:"dd/MM/yyyy"},y:{formatter(a){return`${a} kWh`}}},yaxis:[{seriesName:t,title:{text:"Energy (kWh)"}},{seriesName:t,show:!1},{seriesName:t,show:!1},{seriesName:t,show:!1},{seriesName:t,show:!1},{seriesName:t,show:!1}]}}):p.jsx(w,{})});g.displayName="YearlyChart";const L=e.memo(g);export{L as default};
