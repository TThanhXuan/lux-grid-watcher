import{r as e,j as y,L as w}from"./index-DVH0KEIl.js";import{C as S}from"./react-apexcharts.min-DoFKKWL9.js";import{r as n}from"./utils-bN4E_OZW.js";const a="Solar production",g=e.forwardRef((C,x)=>{const[h,d]=e.useState([]),[b,m]=e.useState(!1),i=e.useRef(!1),E=e.useMemo(()=>{const t=[],r=[],l=[],u=[],f=[],p=[];return h.forEach(s=>{const o=s[3];t.push({x:o,y:n(s[4])}),r.push({x:o,y:n(s[5])}),l.push({x:o,y:n(s[6])}),u.push({x:o,y:n(s[7])}),f.push({x:o,y:n(s[8])}),p.push({x:o,y:n(s[9])})}),[{name:a,data:t},{name:"Battery discharged",data:l},{name:"Battery charged",data:r},{name:"Export to grid",data:f},{name:"Import to user",data:u},{name:"Comsumption",data:p}]},[h]),c=e.useCallback(async()=>{if(i.current)return;i.current=!0;const r=await(await fetch("/monthly-chart")).json();d(r),i.current=!1},[d]);return e.useImperativeHandle(x,()=>({fetchChart:c})),e.useEffect(()=>{c(),document.addEventListener("visibilitychange",()=>{document.hidden||c()})},[c]),e.useEffect(()=>{const t=window.matchMedia("(prefers-color-scheme: dark)");t.matches&&m(!0),t.addEventListener("change",r=>m(r.matches))},[]),h.length?y.jsx(S,{type:"bar",series:E,options:{chart:{toolbar:{show:!1},height:300,zoom:{allowMouseWheelZoom:!1}},colors:["rgb(112, 173, 70)","rgb(90, 155, 213)","rgb(64, 38, 198)","rgb(246, 104, 103)","rgb(153, 107, 31)","rgb(255, 164, 97)"],theme:{mode:b?"dark":"light"},dataLabels:{enabled:!1},xaxis:{type:"category"},tooltip:{x:{format:"dd/MM/yyyy"},y:{formatter(t){return`${t} kWh`}}},yaxis:[{seriesName:a,title:{text:"Energy (kWh)"}},{seriesName:a,show:!1},{seriesName:a,show:!1},{seriesName:a,show:!1},{seriesName:a,show:!1},{seriesName:a,show:!1}]}}):y.jsx(w,{})});g.displayName="MonthlyChart";const j=e.memo(g);export{j as default};
